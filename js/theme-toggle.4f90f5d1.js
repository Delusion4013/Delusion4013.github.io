(()=>{function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,n(o.key),o)}}function n(t){var n=function(t,n){if("object"!=e(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,n||"default");if("object"!=e(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(t)}(t,"string");return"symbol"==e(n)?n:n+""}!function(){"use strict";var e="papermod-theme",n=function(){return n=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.currentTheme=null,this.init()},(r=[{key:"init",value:function(){var e=this.getSavedTheme();this.getSystemTheme(),this.currentTheme=e||"auto",this.applyTheme(this.currentTheme),this.watchSystemTheme(),this.attachToggleListener()}},{key:"getSavedTheme",value:function(){try{return localStorage.getItem(e)}catch(e){return null}}},{key:"saveTheme",value:function(t){try{localStorage.setItem(e,t)}catch(e){}}},{key:"getSystemTheme",value:function(){return window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}},{key:"getEffectiveTheme",value:function(e){return"auto"===e?this.getSystemTheme():e}},{key:"applyTheme",value:function(e){var t=this.getEffectiveTheme(e);document.documentElement.setAttribute("data-theme",t);var n,r,o=document.querySelector('meta[name="theme-color"][media*="light"]'),a=document.querySelector('meta[name="theme-color"][media*="dark"]');o&&a&&("dark"===t?null===(n=document.querySelector('meta[name="theme-color"]'))||void 0===n||n.setAttribute("content","#1a1a1a"):null===(r=document.querySelector('meta[name="theme-color"]'))||void 0===r||r.setAttribute("content","#ffffff"))}},{key:"toggleTheme",value:function(){var e=["auto","light","dark"],t=e.indexOf(this.currentTheme),n=e[(t+1)%e.length];this.currentTheme=n,this.saveTheme(n),this.applyTheme(n),window.dispatchEvent(new CustomEvent("themechange",{detail:{theme:n,effectiveTheme:this.getEffectiveTheme(n)}}))}},{key:"watchSystemTheme",value:function(){var e=this;if(window.matchMedia){var t=window.matchMedia("(prefers-color-scheme: dark)"),n=function(t){"auto"===e.currentTheme&&e.applyTheme("auto")};t.addEventListener?t.addEventListener("change",n):t.addListener&&t.addListener(n)}}},{key:"attachToggleListener",value:function(){var e=this,t=document.getElementById("themeToggle");t&&t.addEventListener("click",function(){e.toggleTheme()})}}])&&t(n.prototype,r),o&&t(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}();"loading"===document.readyState?document.addEventListener("DOMContentLoaded",function(){new n}):new n}()})();
//# sourceMappingURL=theme-toggle.4f90f5d1.js.map