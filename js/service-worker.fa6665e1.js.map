{"version":3,"file":"js/service-worker.fa6665e1.js","mappings":"MAKA,IAAMA,EAAgB,cAChBC,EAAa,GAAHC,OAAMF,EAAa,YAC7BG,EAAgB,GAAHD,OAAMF,EAAa,aAGhCI,EAAgB,CACpB,IACA,gBACA,cACA,sBACA,qBACA,iBAIFC,KAAKC,iBAAiB,UAAW,SAAAC,GAC/BA,EAAMC,UACJC,OAAOC,KAAKT,GACTU,KAAK,SAAAC,GACJ,OAAOA,EAAMC,OAAOT,EACtB,GACCO,KAAK,kBAAMN,KAAKS,aAAa,GAEpC,GAGAT,KAAKC,iBAAiB,WAAY,SAAAC,GAChCA,EAAMC,UACJC,OAAOM,OAAOJ,KAAK,SAAAK,GACjB,OAAOC,QAAQC,IACbF,EACGG,OAAO,SAAAC,GAEN,OAAOA,EAAUC,WAAW,cAAgBD,IAAcnB,GAAcmB,IAAcjB,CACxF,GACCmB,IAAI,SAAAF,GAAS,OAAIX,OAAM,OAAQW,EAAU,GAEhD,GAAGT,KAAK,kBAAMN,KAAKkB,QAAQC,OAAO,GAEtC,GAGAnB,KAAKC,iBAAiB,QAAS,SAAAC,GAC7B,IAAQkB,EAAYlB,EAAZkB,QACI,IAAIC,IAAID,EAAQE,KAGpBC,SAAWC,SAASD,SAKxBH,EAAQK,QAAQC,IAAI,UAAUC,SAAS,aACzCzB,EAAM0B,YACJC,MAAMT,GACHd,KAAK,SAAAwB,GAEJ,GAAIA,EAASC,GAAI,CACf,IAAMC,EAAQF,EAASE,QACvB5B,OAAOC,KAAKP,GAAeQ,KAAK,SAAAC,GAC9BA,EAAM0B,IAAIb,EAASY,EACrB,EACF,CACA,OAAOF,CACT,GAAE,MACK,WAEL,OAAO1B,OAAO8B,MAAMd,GACjBd,KAAK,SAAA6B,GAAM,OAAIA,GAAU/B,OAAO8B,MAAM,gBAAgB,EAC3D,IAMsB,UAAxBd,EAAQgB,aACgB,WAAxBhB,EAAQgB,aACgB,UAAxBhB,EAAQgB,aACgB,SAAxBhB,EAAQgB,YAwBZlC,EAAM0B,YAAYC,MAAMT,IAvBtBlB,EAAM0B,YACJxB,OAAO8B,MAAMd,GACVd,KAAK,SAAA6B,GACJ,OAAIA,GAIGN,MAAMT,GAASd,KAAK,SAAAwB,GAEzB,GAAIA,EAASC,GAAI,CACf,IAAMC,EAAQF,EAASE,QACvB5B,OAAOC,KAAKP,GAAeQ,KAAK,SAAAC,GAC9BA,EAAM0B,IAAIb,EAASY,EACrB,EACF,CACA,OAAOF,CACT,EACF,IAOR,GAGA9B,KAAKC,iBAAiB,UAAW,SAAAC,GACL,gBAAtBA,EAAMmC,KAAKC,QACbtC,KAAKS,cAGmB,eAAtBP,EAAMmC,KAAKC,QACbpC,EAAMC,UACJC,OAAOM,OAAOJ,KAAK,SAAAK,GACjB,OAAOC,QAAQC,IACbF,EAAWM,IAAI,SAAAF,GAAS,OAAIX,OAAM,OAAQW,EAAU,GAExD,GAGN,E","sources":["webpack://hexo-theme-papermod/./source-src/js/service-worker.js"],"sourcesContent":["/**\n * Service Worker for Offline Support\n * Implements caching strategy for better performance and offline capabilities\n */\n\nconst CACHE_VERSION = 'papermod-v1';\nconst CACHE_NAME = `${CACHE_VERSION}::static`;\nconst RUNTIME_CACHE = `${CACHE_VERSION}::runtime`;\n\n// Assets to cache on install\nconst STATIC_ASSETS = [\n  '/',\n  '/css/main.css',\n  '/js/main.js',\n  '/js/theme-toggle.js',\n  '/favicon-32x32.png',\n  '/offline.html', // Create an offline fallback page\n];\n\n// Install event - cache static assets\nself.addEventListener('install', event => {\n  event.waitUntil(\n    caches.open(CACHE_NAME)\n      .then(cache => {\n        return cache.addAll(STATIC_ASSETS);\n      })\n      .then(() => self.skipWaiting())\n  );\n});\n\n// Activate event - clean up old caches\nself.addEventListener('activate', event => {\n  event.waitUntil(\n    caches.keys().then(cacheNames => {\n      return Promise.all(\n        cacheNames\n          .filter(cacheName => {\n            // Delete caches that don't match current version\n            return cacheName.startsWith('papermod-') && cacheName !== CACHE_NAME && cacheName !== RUNTIME_CACHE;\n          })\n          .map(cacheName => caches.delete(cacheName))\n      );\n    }).then(() => self.clients.claim())\n  );\n});\n\n// Fetch event - serve from cache, fallback to network\nself.addEventListener('fetch', event => {\n  const { request } = event;\n  const url = new URL(request.url);\n\n  // Only handle same-origin requests\n  if (url.origin !== location.origin) {\n    return;\n  }\n\n  // Network first for HTML pages\n  if (request.headers.get('accept').includes('text/html')) {\n    event.respondWith(\n      fetch(request)\n        .then(response => {\n          // Cache successful responses\n          if (response.ok) {\n            const clone = response.clone();\n            caches.open(RUNTIME_CACHE).then(cache => {\n              cache.put(request, clone);\n            });\n          }\n          return response;\n        })\n        .catch(() => {\n          // Fallback to cache, then offline page\n          return caches.match(request)\n            .then(cached => cached || caches.match('/offline.html'));\n        })\n    );\n    return;\n  }\n\n  // Cache first for static assets (CSS, JS, images)\n  if (request.destination === 'style' ||\n      request.destination === 'script' ||\n      request.destination === 'image' ||\n      request.destination === 'font') {\n    event.respondWith(\n      caches.match(request)\n        .then(cached => {\n          if (cached) {\n            return cached;\n          }\n\n          return fetch(request).then(response => {\n            // Cache successful responses\n            if (response.ok) {\n              const clone = response.clone();\n              caches.open(RUNTIME_CACHE).then(cache => {\n                cache.put(request, clone);\n              });\n            }\n            return response;\n          });\n        })\n    );\n    return;\n  }\n\n  // Network only for everything else\n  event.respondWith(fetch(request));\n});\n\n// Handle messages from clients\nself.addEventListener('message', event => {\n  if (event.data.action === 'skipWaiting') {\n    self.skipWaiting();\n  }\n\n  if (event.data.action === 'clearCache') {\n    event.waitUntil(\n      caches.keys().then(cacheNames => {\n        return Promise.all(\n          cacheNames.map(cacheName => caches.delete(cacheName))\n        );\n      })\n    );\n  }\n});\n"],"names":["CACHE_VERSION","CACHE_NAME","concat","RUNTIME_CACHE","STATIC_ASSETS","self","addEventListener","event","waitUntil","caches","open","then","cache","addAll","skipWaiting","keys","cacheNames","Promise","all","filter","cacheName","startsWith","map","clients","claim","request","URL","url","origin","location","headers","get","includes","respondWith","fetch","response","ok","clone","put","match","cached","destination","data","action"],"ignoreList":[],"sourceRoot":""}