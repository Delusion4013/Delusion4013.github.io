{"version":3,"file":"js/lazy-load.3cd2f9b0.js","mappings":"CAKA,WACE,aAGA,SAASA,IACeC,SAASC,iBAAiB,2CAElCC,QAAQ,SAAAC,GAEfA,EAAIC,aAAa,YACpBD,EAAIE,aAAa,UAAW,QAIzBF,EAAIC,aAAa,aACpBD,EAAIE,aAAa,WAAY,QAEjC,EACF,CAGA,SAASC,IAEP,KAAI,YAAaC,iBAAiBC,WAAlC,CAKA,IAAMC,EAAaT,SAASC,iBAAiB,uBAE7C,GAAI,yBAA0BS,OAAQ,CACpC,IAAMC,EAAgB,IAAIC,qBAAqB,SAACC,EAASC,GACvDD,EAAQX,QAAQ,SAAAa,GACd,GAAIA,EAAMC,eAAgB,CACxB,IAAMb,EAAMY,EAAME,OAGdd,EAAIe,QAAQC,MACdhB,EAAIgB,IAAMhB,EAAIe,QAAQC,IACtBhB,EAAIiB,gBAAgB,aAIlBjB,EAAIe,QAAQG,SACdlB,EAAIkB,OAASlB,EAAIe,QAAQG,OACzBlB,EAAIiB,gBAAgB,gBAGtBjB,EAAImB,UAAUC,IAAI,eAClBT,EAASU,UAAUrB,EACrB,CACF,EACF,EAAG,CACDsB,WAAY,WACZC,UAAW,MAGbjB,EAAWP,QAAQ,SAAAC,GACjBQ,EAAcgB,QAAQxB,EACxB,EACF,MAEEM,EAAWP,QAAQ,SAAAC,GACbA,EAAIe,QAAQC,MACdhB,EAAIgB,IAAMhB,EAAIe,QAAQC,KAEpBhB,EAAIe,QAAQG,SACdlB,EAAIkB,OAASlB,EAAIe,QAAQG,OAE7B,EA5CF,CA8CF,CAG4B,YAAxBrB,SAAS4B,WACX5B,SAAS6B,iBAAiB,mBAAoB,WAC5C9B,IACAO,GACF,IAEAP,IACAO,IAEH,CAnFD","sources":["webpack://hexo-theme-papermod/./source-src/js/lazy-load.js"],"sourcesContent":["/**\n * Lazy Loading Images\n * Adds native lazy loading and IntersectionObserver fallback for older browsers\n */\n\n(function() {\n  'use strict';\n\n  // Add loading=\"lazy\" to all images in post content\n  function addLazyLoadingToImages() {\n    const contentImages = document.querySelectorAll('.post-content img, .archive-content img');\n\n    contentImages.forEach(img => {\n      // Add native lazy loading attribute if not already present\n      if (!img.hasAttribute('loading')) {\n        img.setAttribute('loading', 'lazy');\n      }\n\n      // Add decoding attribute for better performance\n      if (!img.hasAttribute('decoding')) {\n        img.setAttribute('decoding', 'async');\n      }\n    });\n  }\n\n  // IntersectionObserver fallback for browsers that don't support native lazy loading\n  function setupIntersectionObserver() {\n    // Check if browser supports native lazy loading\n    if ('loading' in HTMLImageElement.prototype) {\n      return; // Native lazy loading is supported, no need for fallback\n    }\n\n    // Fallback using IntersectionObserver\n    const lazyImages = document.querySelectorAll('img[loading=\"lazy\"]');\n\n    if ('IntersectionObserver' in window) {\n      const imageObserver = new IntersectionObserver((entries, observer) => {\n        entries.forEach(entry => {\n          if (entry.isIntersecting) {\n            const img = entry.target;\n\n            // Load the image\n            if (img.dataset.src) {\n              img.src = img.dataset.src;\n              img.removeAttribute('data-src');\n            }\n\n            // Load srcset if available\n            if (img.dataset.srcset) {\n              img.srcset = img.dataset.srcset;\n              img.removeAttribute('data-srcset');\n            }\n\n            img.classList.add('lazy-loaded');\n            observer.unobserve(img);\n          }\n        });\n      }, {\n        rootMargin: '50px 0px', // Start loading 50px before entering viewport\n        threshold: 0.01\n      });\n\n      lazyImages.forEach(img => {\n        imageObserver.observe(img);\n      });\n    } else {\n      // Fallback for browsers without IntersectionObserver - load all images immediately\n      lazyImages.forEach(img => {\n        if (img.dataset.src) {\n          img.src = img.dataset.src;\n        }\n        if (img.dataset.srcset) {\n          img.srcset = img.dataset.srcset;\n        }\n      });\n    }\n  }\n\n  // Initialize when DOM is ready\n  if (document.readyState === 'loading') {\n    document.addEventListener('DOMContentLoaded', function() {\n      addLazyLoadingToImages();\n      setupIntersectionObserver();\n    });\n  } else {\n    addLazyLoadingToImages();\n    setupIntersectionObserver();\n  }\n})();\n"],"names":["addLazyLoadingToImages","document","querySelectorAll","forEach","img","hasAttribute","setAttribute","setupIntersectionObserver","HTMLImageElement","prototype","lazyImages","window","imageObserver","IntersectionObserver","entries","observer","entry","isIntersecting","target","dataset","src","removeAttribute","srcset","classList","add","unobserve","rootMargin","threshold","observe","readyState","addEventListener"],"ignoreList":[],"sourceRoot":""}