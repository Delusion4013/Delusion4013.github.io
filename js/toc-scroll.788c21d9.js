!function(){"use strict";var t=".toc-content",e=".toc-content a",n=".post-content h1, .post-content h2, .post-content h3, .post-content h4, .post-content h5, .post-content h6",o="active",r=100,c=100,i=[],a=[],l=-1;function s(){document.querySelector(t)&&0!==(i=Array.from(document.querySelectorAll(n)).filter(function(t){return t.id}).map(function(t){return{id:t.id,element:t,top:0}})).length&&(a=Array.from(document.querySelectorAll(e)).map(function(t){var e=t.getAttribute("href");return{element:t,id:e?e.substring(1):null,listItem:t.closest("li")}}).filter(function(t){return t.id}),window.addEventListener("scroll",d(u,c)),window.addEventListener("resize",d(u,c)),u(),function(){if(p()){var t=document.querySelectorAll(".toc-content a"),e=document.querySelector(".toc-container");t.forEach(function(t){t.addEventListener("click",function(){p()&&e&&setTimeout(function(){e.classList.remove("toc-open");var t=e.querySelector(".toc-toggle");t&&t.setAttribute("aria-expanded","false")},300)})})}}())}function u(){i.forEach(function(t){t.top=t.element.getBoundingClientRect().top+window.pageYOffset});for(var t=window.pageYOffset+r,e=-1,n=i.length-1;n>=0;n--)if(t>=i[n].top){e=n;break}t<i[0].top&&t>i[0].top-200&&(e=0),e!==l&&(function(t){if(a.forEach(function(t){t.listItem&&t.listItem.classList.remove(o)}),t>=0&&t<i.length){var e=i[t].id,n=a.find(function(t){return t.id===e});n&&n.listItem&&(n.listItem.classList.add(o),function(t){var e=t.closest(".post-sidebar");if(e){var n=e.getBoundingClientRect(),o=t.getBoundingClientRect();(o.top<n.top||o.bottom>n.bottom)&&t.scrollIntoView({behavior:"smooth",block:"nearest"})}}(n.element))}}(e),l=e)}function d(t,e){var n,o=0;return function(){for(var r=this,c=arguments.length,i=new Array(c),a=0;a<c;a++)i[a]=arguments[a];var l=Date.now();l-o<e?(clearTimeout(n),n=setTimeout(function(){o=l,t.apply(r,i)},e)):(o=l,t.apply(this,i))}}function f(){var t=document.querySelector(".toc-toggle"),e=document.querySelector(".toc-container");if(t&&e){t.addEventListener("click",function(){e.classList.toggle("toc-open");var n=e.classList.contains("toc-open");localStorage.setItem("tocOpen",n?"true":"false"),t.setAttribute("aria-expanded",n?"true":"false")});var n=localStorage.getItem("tocOpen");"true"===n?(e.classList.add("toc-open"),t.setAttribute("aria-expanded","true")):"false"===n&&(e.classList.remove("toc-open"),t.setAttribute("aria-expanded","false"))}}function p(){return window.innerWidth<=768}function m(){var t=document.querySelectorAll(".toc-content a");t.forEach(function(e,n){e.addEventListener("keydown",function(e){var o=-1;switch(e.key){case"ArrowDown":e.preventDefault(),o=n+1;break;case"ArrowUp":e.preventDefault(),o=n-1;break;case"Home":e.preventDefault(),o=0;break;case"End":e.preventDefault(),o=t.length-1}o>=0&&o<t.length&&t[o].focus()})})}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",function(){s(),f(),m()}):(s(),f(),m())}();
//# sourceMappingURL=toc-scroll.788c21d9.js.map